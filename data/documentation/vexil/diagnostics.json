{"seeAlsoSections":[{"title":"Diagnostics","identifiers":["doc:\/\/Vexil\/documentation\/Vexil\/FlagPoleDiagnostic"],"generated":true}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A Vexil "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPole"},{"type":"text","text":" is flexible. But that flexibility can quickly grow into complexity if it isn’t managed properly. Say you have a remote flag provider like Launch Darkly or Firebase Remote Config, as well as allowing your testers to override flag values via "},{"type":"codeVoice","code":"UserDefaults"},{"type":"text","text":", and maybe you like to have some pre-defined flags for each of your non-production environments. How do you know what your flag values are at any one time and why? Especially when your app is running on a user’s device."}]},{"anchor":"Point-in-time-diagnostics","level":2,"type":"heading","text":"Point-in-time diagnostics"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Vexil provides diagnostics in two places. The first allows you to inspect the current "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPole"},{"type":"text","text":" to see how it is currently resolving flag values."}]},{"type":"codeListing","syntax":"swift","code":["let diagnostics = flagPole.makeDiagnostics()","print(diagnostics)","","\/\/ Prints:","\/\/ Current value of flag 'flag1' is 'bool(false)'. Resolved by: Default value","\/\/ Current value of flag 'flag2' is 'bool(true)'. Resolved by: UserDefaults.standard"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can view them on a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/Snapshot"},{"type":"text","text":" too, if that snapshot was taken with diagnostics enabled."}]},{"type":"codeListing","syntax":"swift","code":["let snapshot1 = flagPole.snapshot()","let diagnostics1 = try snapshot1.makeDiagnostics() \/\/ This snapshot was not taken with diagnostics enabled. ","","let snapshot2 = flagPole.snapshot(enableDiagnostics: true)","let diagnostics2 = try snapshot2.makeDiagnostics()"]},{"anchor":"Real-time-diagnostics","level":2,"type":"heading","text":"Real-time diagnostics"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Vexil also supports capturing real-time diagnostics alongside the real-time flag publishing. Every time a flag value is changed somewhere in your flag hierarchy, a diagnostic will be emitted that tells you which flag source initiated the change, and how the flag is resolving."}]},{"type":"codeListing","syntax":"swift","code":["let diagnosticsPublisher = flagPole.makeDiagnosticsPublisher()","","diagnosticsPublisher.sink { diagnostic in","\tprint(diagnostic)","}","","\/\/ prints","\/\/ Current value of flag 'flag1' is 'bool(false)'. Resolved by: Default value","\/\/ Current value of flag 'flag2' is 'bool(false)'. Resolved by: Default value","\/\/ Value of flag `flag2` was changed to `bool(true)` by UserDefaults.standard. Resolved by: UserDefaults.standard",""]},{"anchor":"Performance-impact","level":2,"type":"heading","text":"Performance impact"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Diagnostics aren’t free – we keep an additional boxed copy of each "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagValue"},{"type":"text","text":" in memory in addition to its raw value. This is so that when we hand you the diagnostics you can make sense of them without needing to undo the type-erasure, which requires access to the Generic information stored in your flag hierarchy."}]}]}],"variants":[{"paths":["\/documentation\/vexil\/diagnostics"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Vexil\/documentation\/Vexil\/Diagnostics","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Debug issues with flag resolutions and real-time updates using diagnostics."}],"kind":"article","metadata":{"modules":[{"name":"Vexil"}],"role":"collectionGroup","title":"Diagnostics"},"hierarchy":{"paths":[["doc:\/\/Vexil\/documentation\/Vexil"]]},"topicSections":[{"title":"Diagnostics","identifiers":["doc:\/\/Vexil\/documentation\/Vexil\/FlagPoleDiagnostic","doc:\/\/Vexil\/documentation\/Vexil\/FlagPole\/makeDiagnostics()","doc:\/\/Vexil\/documentation\/Vexil\/FlagPole\/makeDiagnosticsPublisher()","doc:\/\/Vexil\/documentation\/Vexil\/Snapshot\/makeDiagnostics()"]}],"references":{"doc://Vexil/documentation/Vexil":{"role":"collection","title":"Vexil","abstract":[{"type":"text","text":"Vexil (named for Vexillology) is a Swift package for managing feature flags (also called feature toggles) in a flexible, multi-provider way."}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil","kind":"symbol","type":"topic","url":"\/documentation\/vexil"},"doc://Vexil/documentation/Vexil/Snapshot/makeDiagnostics()":{"role":"symbol","title":"makeDiagnostics()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"makeDiagnostics"},{"kind":"text","text":"() "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> ["},{"kind":"typeIdentifier","text":"FlagPoleDiagnostic","preciseIdentifier":"s:5Vexil18FlagPoleDiagnosticO"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Returns the current diagnostic state of all flags copied into this Snapshot."}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/Snapshot\/makeDiagnostics()","kind":"symbol","type":"topic","url":"\/documentation\/vexil\/snapshot\/makediagnostics()"},"doc://Vexil/documentation/Vexil/Snapshot":{"role":"symbol","title":"Snapshot","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Snapshot"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"Snapshot"},{"type":"text","text":" serves multiple purposes in Vexil. It is a point-in-time container of flag values, and is also"},{"type":"text","text":" "},{"type":"text","text":"mutable and can be applied \/ saved to a "},{"type":"codeVoice","code":"FlagValueSource"},{"type":"text","text":"."}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/Snapshot","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Snapshot"}],"url":"\/documentation\/vexil\/snapshot"},"doc://Vexil/documentation/Vexil/FlagValue":{"role":"symbol","title":"FlagValue","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"FlagValue"}],"abstract":[{"type":"text","text":"A type that represents the wrapped value of a "},{"type":"codeVoice","code":"Flag"}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagValue","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"FlagValue"}],"url":"\/documentation\/vexil\/flagvalue"},"doc://Vexil/documentation/Vexil/FlagPole/makeDiagnostics()":{"role":"symbol","title":"makeDiagnostics()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"makeDiagnostics"},{"kind":"text","text":"() -> ["},{"kind":"typeIdentifier","text":"FlagPoleDiagnostic","preciseIdentifier":"s:5Vexil18FlagPoleDiagnosticO"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Returns the current diagnostic state of all flags managed by this FlagPole."}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPole\/makeDiagnostics()","kind":"symbol","type":"topic","url":"\/documentation\/vexil\/flagpole\/makediagnostics()"},"doc://Vexil/documentation/Vexil/FlagPole":{"role":"symbol","title":"FlagPole","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"FlagPole"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"FlagPole"},{"type":"text","text":" hoists a group of feature flags \/ feature toggles."}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPole","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"FlagPole"}],"url":"\/documentation\/vexil\/flagpole"},"doc://Vexil/documentation/Vexil/FlagPole/makeDiagnosticsPublisher()":{"role":"symbol","title":"makeDiagnosticsPublisher()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"makeDiagnosticsPublisher"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"AnyPublisher","preciseIdentifier":"s:7Combine12AnyPublisherV"},{"kind":"text","text":"<["},{"kind":"typeIdentifier","text":"FlagPoleDiagnostic","preciseIdentifier":"s:5Vexil18FlagPoleDiagnosticO"},{"kind":"text","text":"], "},{"kind":"typeIdentifier","text":"Never","preciseIdentifier":"s:s5NeverO"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"Publisher"},{"type":"text","text":" that can be used to monitor diagnostic outputs"}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPole\/makeDiagnosticsPublisher()","kind":"symbol","type":"topic","url":"\/documentation\/vexil\/flagpole\/makediagnosticspublisher()"},"doc://Vexil/documentation/Vexil/FlagPoleDiagnostic":{"role":"symbol","title":"FlagPoleDiagnostic","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"FlagPoleDiagnostic"}],"abstract":[{"type":"text","text":"A diagnostic that is returned by "},{"type":"codeVoice","code":"FlagPole.makeDiagnostics()"}],"identifier":"doc:\/\/Vexil\/documentation\/Vexil\/FlagPoleDiagnostic","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"FlagPoleDiagnostic"}],"url":"\/documentation\/vexil\/flagpolediagnostic"}}}